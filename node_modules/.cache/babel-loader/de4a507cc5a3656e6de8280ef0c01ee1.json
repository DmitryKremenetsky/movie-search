{"ast":null,"code":"import _slicedToArray from\"/Users/kirya_ko/Documents/GitHub/movie-search-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';export default function useMoviesList(searchQuery,page){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFetching=_useState4[0],setIsFetching=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalPages=_useState6[0],setTotalPages=_useState6[1];useEffect(function(){if(searchQuery.trim().length<3){return setMovies([]);};setMovies([]);setIsFetching(true);setTotalPages(0);fetch(\"https://www.omdbapi.com/?&apikey=35def29d&s=\".concat(searchQuery,\"&page=\").concat(page)).then(function(res){return res.json();}).then(function(_ref){var Response=_ref.Response,Search=_ref.Search,totalResults=_ref.totalResults;setMovies(Response==='True'?Search:[]);setTotalPages(Response==='True'?Math.round(totalResults/10):0);}).catch(function(err){console.log(err);setMovies([]);setTotalPages(0);}).finally(function(){return setIsFetching(false);});},[searchQuery,page]);return{movies:movies,totalPages:totalPages,isFetching:isFetching,setMovies:setMovies};}","map":{"version":3,"names":["useState","useEffect","useMoviesList","searchQuery","page","_useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","isFetching","setIsFetching","_useState5","_useState6","totalPages","setTotalPages","trim","length","fetch","concat","then","res","json","_ref","Response","Search","totalResults","Math","round","catch","err","console","log","finally"],"sources":["/Users/kirya_ko/Documents/GitHub/movie-search-1/src/hooks/useMoviesList.js"],"sourcesContent":["import { useState , useEffect } from 'react';\n\nexport default function useMoviesList(searchQuery, page) {\n  const [movies, setMovies] = useState([]);\n  const [isFetching, setIsFetching] = useState(false);\n  const [totalPages, setTotalPages] = useState(0);\n\n  useEffect(() => {\n    if (searchQuery.trim().length < 3) {\n      return setMovies([]);\n    };\n\n    setMovies([]);\n    setIsFetching(true);\n    setTotalPages(0);\n\n    fetch(`https://www.omdbapi.com/?&apikey=35def29d&s=${searchQuery}&page=${page}`)\n      .then((res) => res.json())\n      .then(({ Response, Search, totalResults }) => {\n        setMovies(Response === 'True' ? Search : []);\n        setTotalPages(Response === 'True' ? Math.round(totalResults / 10) : 0);\n      })\n      .catch((err) => {\n        console.log(err);\n        setMovies([]);\n        setTotalPages(0);\n      })\n      .finally(() => setIsFetching(false));\n  }, [searchQuery, page]);\n\n  return {\n    movies,\n    totalPages,\n    isFetching,\n    setMovies,\n  }\n}\n"],"mappings":"qIAAA,OAASA,QAAQ,CAAGC,SAAS,KAAQ,OAAO,CAE5C,cAAe,SAAS,CAAAC,aAAaA,CAACC,WAAW,CAAEC,IAAI,CAAE,CACvD,IAAAC,SAAA,CAA4BL,QAAQ,CAAC,EAAE,CAAC,CAAAM,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAoCV,QAAQ,CAAC,KAAK,CAAC,CAAAW,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA5CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,IAAAG,UAAA,CAAoCd,QAAQ,CAAC,CAAC,CAAC,CAAAe,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAxCE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAEhCd,SAAS,CAAC,UAAM,CACd,GAAIE,WAAW,CAACe,IAAI,CAAC,CAAC,CAACC,MAAM,CAAG,CAAC,CAAE,CACjC,MAAO,CAAAV,SAAS,CAAC,EAAE,CAAC,CACtB,CAAC,CAEDA,SAAS,CAAC,EAAE,CAAC,CACbI,aAAa,CAAC,IAAI,CAAC,CACnBI,aAAa,CAAC,CAAC,CAAC,CAEhBG,KAAK,gDAAAC,MAAA,CAAgDlB,WAAW,WAAAkB,MAAA,CAASjB,IAAI,CAAE,CAAC,CAC7EkB,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,GAAC,CACzBF,IAAI,CAAC,SAAAG,IAAA,CAAwC,IAArC,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAAEC,MAAM,CAAAF,IAAA,CAANE,MAAM,CAAEC,YAAY,CAAAH,IAAA,CAAZG,YAAY,CACrCnB,SAAS,CAACiB,QAAQ,GAAK,MAAM,CAAGC,MAAM,CAAG,EAAE,CAAC,CAC5CV,aAAa,CAACS,QAAQ,GAAK,MAAM,CAAGG,IAAI,CAACC,KAAK,CAACF,YAAY,CAAG,EAAE,CAAC,CAAG,CAAC,CAAC,CACxE,CAAC,CAAC,CACDG,KAAK,CAAC,SAACC,GAAG,CAAK,CACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBvB,SAAS,CAAC,EAAE,CAAC,CACbQ,aAAa,CAAC,CAAC,CAAC,CAClB,CAAC,CAAC,CACDkB,OAAO,CAAC,iBAAM,CAAAtB,aAAa,CAAC,KAAK,CAAC,GAAC,CACxC,CAAC,CAAE,CAACV,WAAW,CAAEC,IAAI,CAAC,CAAC,CAEvB,MAAO,CACLI,MAAM,CAANA,MAAM,CACNQ,UAAU,CAAVA,UAAU,CACVJ,UAAU,CAAVA,UAAU,CACVH,SAAS,CAATA,SACF,CAAC,CACH"},"metadata":{},"sourceType":"module"}